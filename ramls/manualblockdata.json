{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Manual patron block schema",
  "description": "Allows institution to manually block a patron from borrowing, renewing, and/or requesting until specified issue is resolved",
  "type": "object",
  "properties": {
    "type": {
      "description": "Type of patron block",
      "type": "string"
    },
    "desc": {
      "description": "Patron block description",
      "type": "string",
      "x-fqm-visible-by-default": true,
      "x-fqm-essential": true
    },
    "code": {
      "description": "Code of the template if block is defined based on a template (optional)",
      "type": "string",
      "x-fqm-visible-by-default": true,
      "x-fqm-essential": true
    },
    "staffInformation": {
      "description": "Additional information to staff (optional)",
      "type": "string",
      "x-fqm-essential": true
    },
    "patronMessage": {
      "description": "Message to patron (optional)",
      "type": "string",
      "x-fqm-essential": true
    },
    "expirationDate": {
      "description": "Date and time the patron block expiration if is provided the patron block should be automatically removed on that date",
      "type": "string",
      "format": "date-time",
      "x-fqm-essential": true
    },
    "borrowing": {
      "description": "A flag to determine borrowing block action",
      "type": "boolean",
      "x-fqm-essential": true
    },
    "renewals": {
      "description": "A flag to determine renewal block action",
      "type": "boolean",
      "x-fqm-essential": true
    },
    "requests": {
      "description": "A flag to determine request block action",
      "type": "boolean",
      "x-fqm-essential": true
    },
    "userId": {
      "description": "ID of the user",
      "$ref": "raml-util/schemas/uuid.schema",
      "x-fqm-joins-to-raw": [
        {
          "targetId": "bb058933-cd06-4539-bd3a-6f248ff98ee2",
          "targetField": "id",
          "type": "equality-cast-uuid",
          "direction": "left"
        },
        {
          "targetId": "f2615ea6-450b-425d-804d-6a495afd9308",
          "targetField": "id",
          "type": "equality-cast-uuid",
          "direction": "left"
        }
      ]
    },
    "metadata": {
      "description": "Metadata about creation to patron block, provided by the server",
      "$ref": "metadata.json"
    },
    "id": {
      "description": "Patron block id, UUID",
      "$ref": "raml-util/schemas/uuid.schema"
    }
  },
  "additionalProperties": false,
  "required": ["desc", "userId"]
}
